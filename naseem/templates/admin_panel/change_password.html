{% load static %}
{% include 'admin_panel/header.html' %}
<div id="profilePage"></div>
<div class="pcoded-content">
  <div class="pcoded-inner-content">
    <div class="main-body user-profile">
      <div class="page-wrapper">
        <div class="page-header card">
          <div class="row align-items-end">
            <div class="col-sm-6 col-lg-6">
              <div class="page-header-title d-flex">
                <i class="ti-user bg-danger"></i>
                <div class="d-inline">
                  <h4>Change Password</h4>
                </div>
              </div>
            </div>
            <div class="col-sm-6 col-lg-6">
              <div class="page-header-breadcrumb">
                <ul class="breadcrumb-title">
                  <li class="breadcrumb-item">
                    <a href="home">
                      <i class="icofont icofont-home"></i>
                    </a>
                  </li>
                  <li class="breadcrumb-item"><a href="passwordchange">Change Password</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="page-body">
          <div class="row">
            <div class="col-lg-12">
              <div class="card">                    
                <div class="card-block">
                  <div class="change-pass">
                    <div class="card-header p-0 mb-3">
                      <h5 class="card-header-text">Change Password</h5>
                    </div>

                    <form method="POST" >

                      {% csrf_token%}
           
                    <div class="row">
                      <div class="col-lg-12">
                        <div class="general-info">
                          <div class="row">
                            <div class="col-sm-12 col-md-12 col-lg-4">
                              <div class="input-group">
                                <span class="input-group-addon"><i class="icofont icofont-lock"></i></span>
                                {{form.old_password}}
                              <!--  <input type="password" name="oldpassword" class="form-control" value="" placeholder="Old Password"  minlength="8" data-msg-minlength="Password must be 8 characters or more." data-msg-required="Please enter your password." required />-->
                              </div>
                            </div>
                            <div class="col-sm-12 col-md-12 col-lg-4">
                              <div class="input-group">
                                <span class="input-group-addon"><i class="icofont icofont-lock"></i></span>
                                {{form.new_password1}}
                             <!--   <input type="password" name="newpassword" class="form-control" value="" placeholder="New Password"  minlength="8" data-msg-minlength="Password must be 8 characters or more." data-msg-required="Please enter your password." required />-->
                              </div>
                            </div>
                            <div class="col-sm-12 col-md-12 col-lg-4">
                              <div class="input-group">
                                <span class="input-group-addon"><i class="icofont icofont-lock"></i></span>
                                {{form.new_password2}}
                              <!--  <input type="password" name="conpassword" class="form-control" value="" placeholder="Confirm Password"  minlength="8" data-msg-minlength="Password must be 8 characters or more." data-msg-required="Please enter your password." required />-->
                              </div>
                            </div>
                            <div class="col-sm-12 col-md-12 col-lg-12 text-center mt-2">
                              <button  type="submit" class="btn btn-primary m-r-20 edit-cancel">Save</button>

                              <a href="/admin/panel/admin_profile" >  
                              <button type="button" class="btn btn-default waves-effect edit-cancel">Back</button>
                              </a>

                            </div>
                          </div>                              
                        </div>
                      </div>
                    </div>

                  </form>
                  
                  {% if form.errors %}
          				<br>
           				<p style="color:red; text-align: center">{{ form.non_field_errors.as_text |cut:"* "}}</p>
                  {% endif %}
                  
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- success modal -->
<div id="profile-success-modal" class="modal fade" role="dialog">
  <div class="modal-dialog modal-sm" data-dismiss="modal">
    <div class="text-center">
      <img src="{% static 'images/logo.png' %}" alt="logo.png" />
    </div>
    <div class="modal-body text-center">
      <div class="row">
        <div class="col-md-12">
          <i class="text-success fs-34 d-inline-block icofont icofont-check-circled mb-4"></i>
          <h6>Saved Successfully</h6>
        </div>
      </div>
    </div>
  </div>
</div>         
{% include 'admin_panel/footer.html' %}

<script>
						/* Because i didnt set placeholder values in forms.py they will be set here using vanilla Javascript
		//We start indexing at one because CSRF_token is considered and input field 
		 */

		//Query All input fields
		var form_fields = document.getElementsByTagName('input')
		form_fields[1].placeholder="oldpassword..."
		form_fields[2].placeholder='newpassword...';
		form_fields[3].placeholder='confirm newpassword ...';


		for (var field in form_fields){	
			form_fields[field].className += ' form-control'
		}
	</script>

